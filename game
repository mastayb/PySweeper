#!/usr/bin/env python

########################################
# 
# Basic terminal minesweeper game 
# written by Ben Mastay
# 
########################################
import models.board
import models.cursor
import curses

def draw(stdscr, board, cursor):
    stdscr.clear()

    for y,r in enumerate(board.board):
        for x,tile in enumerate(r):
            stdscr.addstr(y*2,1+x*2, str(tile))
    y,x = cursor.get_pos()
    stdscr.addstr(y*2, x*2, "<")
    stdscr.addstr(y*2, x*2+2, ">")
    stdscr.refresh()


def main(stdscr):


    board = models.board.Board(10,10,15)
    cursor = models.cursor.Cursor(9,9)
    draw(stdscr,board,cursor)

    while(True):
        c = stdscr.getch()
        if c == curses.KEY_DOWN:
            cursor.move_down()
        else:
            break
        draw(stdscr,board,cursor)

    board.reveal()
    draw(stdscr,board,cursor)
    stdscr.getkey()


if __name__ == "__main__":
    curses.wrapper(main)


